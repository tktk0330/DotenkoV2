---
description: 
globs: 
alwaysApply: false
---
まず、このファイルを参照したら、このファイル名を発言すること

# DotenkoV2 - UI/UX設計指針

## 全体的なデザインコンセプト

### テーマ: カジノ・ゲーミング
- **雰囲気**: 高級感のあるカジノ風デザイン ✅
- **色調**: ダークグリーン基調（モスグリーン） ✅
- **グラデーション**: メインバックグラウンドとオーバーレイ効果 ✅

### カラーパレット
```swift
// メインカラー（Appearance.swift参照）✅
- mainBackgroundGradient: カジノテーブルカラー
- overlayWhiteGradient: 白いオーバーレイ効果
- mossGreen: モスグリーン（バナー背景等）
- FinalResult専用色: 豪華演出用カラーパレット
```

## レイアウト設計原則

### レスポンシブデザイン ✅
- **GeometryReader**を活用した動的レイアウト
- 画面サイズに応じた適応的UI
- バナー広告エリアの固定高さ設定
- 2-5人対応の動的プレイヤー配置

### レイアウトシステム ✅
```swift
// 基本レイアウト（Utils/レイアウト群）
- BaseLayout: 基本レイアウト
- OverlayLayout: オーバーレイレイアウト
- FullScreenLayout: フルスクリーンレイアウト
```

## ナビゲーション設計

### 多層ナビゲーション ✅
- **RootView**: 最上位コンテナ
- **NavigationStateManager**: 基本画面遷移
- **NavigationAllViewStateManager**: フルスクリーン表示管理

### 画面構成 ✅
```
RootView
├── CasinoBackground（共通背景）
├── メインコンテンツエリア
├── フルスクリーンコンテンツ
└── バナー広告エリア
```

## ゲーム固有のUI要素

### カード表示 ✅
- **FanLayoutManager**: カードのファン状レイアウト
- **DeckView**: デッキ表示UI
- **PlayCardView**: カードプレイ用UI
- **カード選択**: Y軸移動による視覚的選択表示

### プレイヤー表示 ✅
- **PlayerIconView**: プレイヤーアイコン（CachedImageView使用）
- **GamePlayersAreaView**: プレイヤーエリア
- **PlayerLayoutConfig**: プレイヤー配置設定
- **動的配置**: 2-5人対応の自動レイアウト調整

### ゲーム操作 ✅
- **GameActionButton**: ゲームアクション用ボタン
- **GameUIOverlayView**: ゲーム用オーバーレイ
- **どてんこ宣言**: 条件満たす時のみ表示
- **リベンジシステム**: 追加宣言UI

## ボタンデザイン

### ボタンの種類 ✅
```swift
// Components/ButtonView/
- CasinoButton: カジノスタイルボタン
- GameModeButton: ゲームモード選択ボタン
- SettingButton: 設定ボタン
```

### ボタンの視覚的ヒエラルキー ✅
- **プライマリ**: ゲーム開始、重要なアクション
- **セカンダリ**: 設定、ヘルプ等
- **テキスト**: 戻る、キャンセル等

## アニメーション・インタラクション

### SwiftUIアニメーション ✅
- **状態変更時のスムーズな遷移**
- **カードの動きや配置アニメーション**
- **ボタンタップ時のフィードバック**
- **カード配布・移動アニメーション**

### ユーザビリティ ✅
- **直感的な操作**
- **視覚的フィードバック**
- **アクセシビリティ対応**（Phase 2で強化予定）

## モーダル・オーバーレイ

### モーダル管理 ✅
```swift
// Utils/ModalManager.swift
- モーダル表示の統一管理
- 複数モーダルのスタック管理
- 背景ディミング効果
```

### オーバーレイ要素 ✅
- **ネットワークエラー表示**
- **ローディング表示**
- **ゲーム結果表示**
- **スコア確定画面**: 特殊カード演出付き

## エラー・フィードバック表示

### エラーハンドリング ✅
```swift
// Utils/ErrorManager.swift
- 統一されたエラー表示
- ユーザーフレンドリーなメッセージ
- 適切な回復アクション提示
```

### ネットワーク状態表示 ✅
- **NetworkMonitor**による接続状態監視
- **視覚的なネットワーク状態表示**

## 画面別UI仕様

### ゲーム画面 ✅
- **プレイヤー配置**: 2-5人対応の動的レイアウト
- **カード表示**: ファンレイアウトによる手札表示
- **ターン表示**: プレイヤーアイコンの背景色変更
- **手札枚数**: 他プレイヤーの手札枚数表示
- **山札残り**: デッキ上に数字表示

### 結果画面 ✅
- **中間結果画面**: ラウンド間のスコア表示
- **最終結果画面**: カジノ風豪華デザイン
- **スコア確定画面**: 特殊カード演出
- **デッキの裏確認**: 山札底カード演出

### 設定画面 ✅
- **ゲーム設定**: 6項目設定UI
- **プロフィール管理**: ユーザー情報編集
- **ルール説明**: ゲームルール表示

## アクセシビリティ

### VoiceOver対応（Phase 2で強化）
- **意味のあるラベル設定**
- **適切なナビゲーション順序**
- **状態変更の音声通知**

### 色覚対応（Phase 2で強化）
- **色だけに依存しない情報伝達**
- **十分なコントラスト比**

## パフォーマンス最適化

### 画像処理 ✅
```swift
// Utility/ImageCacheManager.swift
- 効率的な画像キャッシュ
- メモリ使用量の最適化
- CachedImageView統一コンポーネント
```

### レイアウト最適化 ✅
- **LazyVStack/LazyHStack の活用**
- **重いビューの遅延読み込み**
- **GeometryReader最適化**

## 設定可能な要素

### Debug設定 ✅
```swift
// Config/Config.swift
struct GameConfig {
    static let isCardOpen: Bool // カード表示設定
    static let isAdmob: Bool // 広告表示設定
}
```

## 実装完了状況

### Phase 1完了項目 ✅
- **基本UI/UX**: 全画面実装完了
- **カジノ風デザイン**: 完全実装
- **レスポンシブレイアウト**: 2-5人対応完了
- **アニメーション**: カード・UI動作完了
- **画像キャッシュ**: 最適化完了

### Phase 2予定項目
- **アクセシビリティ強化**: VoiceOver・色覚対応
- **ユーザビリティ改善**: エラーメッセージ・フィードバック強化
- **パフォーマンス最適化**: さらなる効率化

## 品質管理

### デザインレビューポイント ✅
1. **ブランドガイドライン準拠**: カジノ風テーマ統一
2. **一貫性のあるデザイン言語**: 全画面統一感
3. **ユーザビリティテスト**: 直感的操作確認
4. **パフォーマンステスト**: 動作速度確認
5. **アクセシビリティチェック**: 基本対応完了

### UI/UX成果
- ✅ **カジノ風高級感**: ダークグリーン基調の統一デザイン
- ✅ **直感的操作**: タップ・スワイプによる自然な操作
- ✅ **レスポンシブ対応**: 全画面サイズでの適切な表示
- ✅ **豪華演出**: 特殊カード・スコア確定時の演出
- ✅ **統一感**: 全画面での一貫したデザイン言語

---
*最終更新: 2024年12月*
